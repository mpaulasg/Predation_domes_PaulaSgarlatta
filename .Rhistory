library(ozmaps)
library(cowplot)
library(car)
library(glmmTMB)
library(DHARMa)
library(here)
data <- read.csv(here:: here("data/data_predation.csv"))
data_domes <- data %>%
filter (Method != "Squidpop",
Treatment != "No_fish") %>%
dplyr::select(-Treatment)
data_domes <- unite(data_domes, rep_ID, c("Site", "Replicate", "Time"), sep = "_", remove = FALSE)
attack_number <- data_domes %>%
dplyr::group_by(Area,Site, rep_ID,Time, total_video_min)%>%
dplyr::summarise(attack=sum(attack_number,na.rm=T))
inspecting_number <- data_domes %>%
dplyr::group_by(Area,Site,rep_ID,Time, total_video_min, Trophic.group)%>%
dplyr::summarise(inspecting=sum(inspecting_number,na.rm=T))
View(attack_number)
View(data)
View(data_domes)
View(data_domes)
mod1 <- glmmTMB (attack_number   ~ Area + (1|Site) + (1|rep_ID) + offset (total_video_min),
data=data_domes, family = nbinom2())
summary(mod1)
Anova(mod1) # p=0.33
attack_res_domes <- simulateResiduals(mod1)
plot(attack_res_domes) #Working with nbinom2!! :)
mod1 <- glmmTMB (attack_number   ~ Area + (1|Site) + (1|rep_ID) + offset (total_video_min),
data=data_domes, family = poisson())
summary(mod1)
Anova(mod1) # p=0.33
attack_res_domes <- simulateResiduals(mod1)
plot(attack_res_domes) #Working with nbinom2!! :)
mod1 <- glmmTMB (attack_number   ~ Area + (1|Site) + (1|rep_ID) + offset (total_video_min),
data=data_domes, family = nbinom1())
summary(mod1)
Anova(mod1) # p=0.33
attack_res_domes <- simulateResiduals(mod1)
plot(attack_res_domes) #Working with nbinom2!! :)
mod1 <- glmmTMB (attack   ~ Area + (1|Site) + (1|rep_ID) + offset (total_video_min),
data=attack_number, family = nbinom1())
summary(mod1)
Anova(mod1) # p=0.33
attack_res_domes <- simulateResiduals(mod1)
plot(attack_res_domes) #Working with nbinom2!! :)
mod1 <- glmmTMB (attack   ~ Area + (1|Site) + (1|rep_ID) + offset (total_video_min),
data=attack_number, family = nbinom2())
summary(mod1)
Anova(mod1) # p=0.33
attack_res_domes <- simulateResiduals(mod1)
plot(attack_res_domes) #Working with nbinom2!! :)
mod1 <- glmmTMB (attack   ~ Area + (1|Site) + (1|rep_ID) + offset (total_video_min),
data=attack_number, family = poisson())
summary(mod1)
Anova(mod1) # p=0.33
attack_res_domes <- simulateResiduals(mod1)
plot(attack_res_domes) #Working with nbinom2!! :)
mod1 <- glmmTMB (attack   ~ Area + (1|Site) + (1|rep_ID) + offset (total_video_min),
data=attack_number, family = poisson(link = "log"))
summary(mod1)
Anova(mod1)
attack_res_domes <- simulateResiduals(mod1)
plot(attack_res_domes) #Working with nbinom2!! :)
mod1 <- glmmTMB (attack   ~ Area + (1|Site) + (1|rep_ID) + offset (total_video_min), zi=~1,
data=attack_number, family = poisson(link = "log"))
summary(mod1)
Anova(mod1)
attack_res_domes <- simulateResiduals(mod1)
plot(attack_res_domes) #Working with nbinom2!! :)
mod1 <- glmmTMB (log(attack +1)   ~ Area + (1|Site) + (1|rep_ID) + offset (total_video_min),
data=attack_number, family = poisson())
summary(mod1)
Anova(mod1)
attack_res_domes <- simulateResiduals(mod1)
plot(attack_res_domes) #Working with nbinom2!! :)
mod1 <- glmmTMB (log(attack +1)   ~ Area + (1|Site) + (1|rep_ID) + offset (total_video_min),
data=attack_number, family = quasipoisson())
mod1 <- glmmTMB (log(attack +1)   ~ Area + (1|Site) + (1|rep_ID) + offset (total_video_min),
data=attack_number, family = poisson())
summary(mod1)
Anova(mod1) #
attack_res_domes <- simulateResiduals(mod1)
plot(attack_res_domes) #Log-tramsformation and Poisson is the best one but still not great
inspecting_number <- data_domes %>%
dplyr::group_by(Area,Site,rep_ID,Time, total_video_min, Trophic.group)%>%
dplyr::summarise(inspecting=sum(inspecting_number,na.rm=T))
mod2 <- glmmTMB (inspecting ~ Area + (1|Site) + (1|rep_ID) + offset (total_video_min),
data=inspecting_number, family = nbinom2())
summary(mod2)
Anova(mod2)
attack_res_domes_mod2 <- simulateResiduals(mod2)
plot(attack_res_domes_mod2) # Residuals look terrible...
mod2 <- glmmTMB (inspecting ~ Area + (1|Site) + (1|rep_ID) + offset (total_video_min),
data=inspecting_number, family = poisson())
summary(mod2)
Anova(mod2)
attack_res_domes_mod2 <- simulateResiduals(mod2)
plot(attack_res_domes_mod2) # Residuals look terrible...
mod2 <- glmmTMB (log(inspecting + 1) ~ Area + (1|Site) + (1|rep_ID) + offset (total_video_min),
data=inspecting_number, family = poisson())
summary(mod2)
Anova(mod2)
attack_res_domes_mod2 <- simulateResiduals(mod2)
plot(attack_res_domes_mod2) # Residuals look terrible...
mod2 <- glmmTMB (log(inspecting + 1) ~ Area + (1|Site) + (1|rep_ID) + offset (total_video_min),
data=inspecting_number, family = nbinom1())
summary(mod2)
Anova(mod2)
attack_res_domes_mod2 <- simulateResiduals(mod2)
plot(attack_res_domes_mod2) # Residuals look terrible...
mod2 <- glmmTMB (log(inspecting + 1) ~ Area + (1|Site) + (1|rep_ID) + offset (total_video_min),
data=inspecting_number, family = nbinom2())
summary(mod2)
Anova(mod2)
attack_res_domes_mod2 <- simulateResiduals(mod2)
plot(attack_res_domes_mod2) # Residuals look terrible...
mod2 <- glmmTMB (inspecting ~ Area + (1|Site) + (1|rep_ID) + offset (total_video_min), zi=~1,
data=inspecting_number, family = nbinom2())
summary(mod2)
Anova(mod2)
attack_res_domes_mod2 <- simulateResiduals(mod2)
plot(attack_res_domes_mod2) # Residuals look terrible...
mod2 <- glmmTMB (inspecting ~ Area + (1|Site) + (1|rep_ID) + offset (total_video_min), zi=~1,
data=inspecting_number, family = poisson())
summary(mod2)
Anova(mod2)
attack_res_domes_mod2 <- simulateResiduals(mod2)
plot(attack_res_domes_mod2) # Residuals look terrible...
piscivores <- data_domes %>%
filter(Trophic.group == "Piscivore")
pisc <- glmmTMB (log(attack + 1)  ~ Area + (1|Site)+ (1|rep_ID) + offset (total_video_min),
data=piscivores,
family = nbinom2())
rm(list=ls()) # cleaning memory
# libraries
library(tidyverse)
library(dplyr)
library(ggplot2)
library(sp)
library(rgdal)
library(raster)
library(ggpubr)
library(ggspatial)
library(ozmaps)
library(cowplot)
library(car)
library(glmmTMB)
library(DHARMa)
library(here)
data <- read.csv(here:: here("data/data_predation.csv"))
data_domes <- data %>%
filter (Method != "Squidpop",
Treatment != "No_fish") %>%
dplyr::select(-Treatment)
data_domes <- unite(data_domes, rep_ID, c("Site", "Replicate", "Time"), sep = "_", remove = FALSE)
attack_number <- data_domes %>%
dplyr::group_by(Area,Site, rep_ID,Time, Trophic.group)%>% # sum everything in the transect by species
dplyr::summarise(attack=sum(attack_number,na.rm=T))%>%
ungroup%>%
tidyr::complete(Trophic.group, nesting(Area, Site, rep_ID,Time),fill= list(attack=0)) %>%
replace(is.na(.), 0)%>% # replace the NaN resulting from dividing 0 by 0 for 0
glimpse()
attack_number <- data_domes %>%
dplyr::group_by(Area,Site, rep_ID,Time)%>% # sum everything in the transect by species
dplyr::summarise(attack=sum(attack_number,na.rm=T))
View(attack_number)
inspecting_number <- data_domes %>%
dplyr::group_by(Area,Site,rep_ID,Time,Trophic.group)%>%
dplyr::summarise(inspecting=sum(inspecting_number,na.rm=T))%>%
ungroup%>%
tidyr::complete(Trophic.group, nesting(Area, Site,rep_ID,Time),fill= list(inspecting=0)) %>%
replace(is.na(.), 0)%>% # replace the NaN resulting from dividing 0 by 0 for 0
glimpse()
inspecting_number <- data_domes %>%
dplyr::group_by(Area,Site,rep_ID,Time,Species)%>%
dplyr::summarise(inspecting=sum(inspecting_number,na.rm=T))%>%
ungroup%>%
tidyr::complete(Species, nesting(Area, Site,rep_ID,Time),fill= list(inspecting=0)) %>%
replace(is.na(.), 0)%>% # replace the NaN resulting from dividing 0 by 0 for 0
glimpse()
mod1 <- glmmTMB (attack   ~ Area + (1|Site) + (1|rep_ID),
data=attack_number, family = nbinom1())
summary(mod1)
Anova(mod1) # p=0.28 Area , p<0.0001 trophic group
attack_res_domes <- simulateResiduals(mod1)
plot(attack_res_domes) #Good
attack_number_total<- data_domes %>%
dplyr::group_by(Area,Site, rep_ID,Time)%>% # sum everything in the transect by species
dplyr::summarise(attack=sum(attack_number,na.rm=T))
View(attack_number_total)
mod1 <- glmmTMB (attack   ~ Area + (1|Site) + (1|rep_ID),
data=attack_number_total, family = poisson())
summary(mod1)
Anova(mod1) # p=0.28 Area
attack_res_domes <- simulateResiduals(mod1)
plot(attack_res_domes) #Good
inspect_domes <- glmmTMB (log(inspecting + 1)  ~ Area + (1|Site) + (1|rep_ID), data=inspecting_number,
family = nbinom1())
Anova(inspect_domes) #Area p=0.09
inspec_res_domes <- simulateResiduals(inspect_domes)
plot(inspec_res_domes) # Good!
inspecting_number_total <- data_domes %>%
dplyr::group_by(Area,Site,rep_ID,Time)%>%
dplyr::summarise(inspecting=sum(inspecting_number,na.rm=T))
inspect_domes <- glmmTMB (inspecting ~ Area + (1|Site) + (1|rep_ID), data=inspecting_number_total,
family = poisson())
Anova(inspect_domes) #Area p=0.12
inspec_res_domes <- simulateResiduals(inspect_domes)
plot(inspec_res_domes) # Good!
piscivores <- attack_number %>%
filter(Trophic.group == "Piscivore")
pisc <- glmmTMB (attack ~ Area + (1|Site)+ (1|rep_ID), data=piscivores,
family = poisson())
attack_total <- data_domes %>%
dplyr::group_by(Area,Site, rep_ID,Time, total_video_min, Trophic.group)%>%
dplyr::summarise(attack=sum(attack_number,na.rm=T))%>%
ungroup%>%
tidyr::complete(Trophic.group, nesting(Area, Site, rep_ID,Time, total_video_min),fill= list(attack=0)) %>%
replace(is.na(.), 0)%>% # replace the NaN resulting from dividing 0 by 0 for 0
glimpse()
rm(list=ls()) # cleaning memory
# libraries
library(tidyverse)
library(dplyr)
library(ggplot2)
library(sp)
library(rgdal)
library(raster)
library(ggpubr)
library(ggspatial)
library(ozmaps)
library(cowplot)
library(car)
library(glmmTMB)
library(DHARMa)
library(here)
data <- read.csv(here:: here("data/data_predation.csv"))
data_domes <- data %>%
filter (Method != "Squidpop",
Treatment != "No_fish") %>%
dplyr::select(-Treatment)
data_domes <- unite(data_domes, rep_ID, c("Site", "Replicate", "Time"), sep = "_", remove = FALSE)
attack_number <- data_domes %>%
dplyr::group_by(Area,Site, rep_ID,Time, total_video_min)%>%
dplyr::summarise(attack=sum(attack_number,na.rm=T))
inspecting_number <- data_domes %>%
dplyr::group_by(Area,Site,rep_ID,Time, total_video_min, Trophic.group)%>%
dplyr::summarise(inspecting=sum(inspecting_number,na.rm=T))
mod1 <- glmmTMB (log(attack +1)   ~ Area + (1|Site) + (1|rep_ID) + offset (total_video_min),
data=attack_number, family = poisson())
summary(mod1)
Anova(mod1) #
attack_res_domes <- simulateResiduals(mod1)
plot(attack_res_domes) #Log-transformation and Poisson is the best one but still not great
mod2 <- glmmTMB (inspecting ~ Area + (1|Site) + (1|rep_ID) + offset (total_video_min),
data=inspecting_number, family = poisson())
summary(mod2)
Anova(mod2)
attack_res_domes_mod2 <- simulateResiduals(mod2)
plot(attack_res_domes_mod2) # Residuals look terrible...
attack_total <- data_domes %>%
dplyr::group_by(Area,Site, rep_ID,Time, total_video_min, Trophic.group)%>%
dplyr::summarise(attack=sum(attack_number,na.rm=T))%>%
ungroup%>%
tidyr::complete(Trophic.group, nesting(Area, Site, rep_ID,Time, total_video_min),fill= list(attack=0)) %>%
replace(is.na(.), 0)%>% # replace the NaN resulting from dividing 0 by 0 for 0
glimpse()
piscivores <- attack_total %>%
filter(Trophic.group == "Piscivore")
pisc <- glmmTMB (log(attack + 1)  ~ Area + (1|Site)+ (1|rep_ID) + offset (total_video_min),
data=piscivores,
family = nbinom2())
View(piscivores)
pisc <- glmmTMB (attack ~ Area + (1|Site)+ (1|rep_ID) + offset (total_video_min),
data=piscivores,
family = nbinom2())
Anova(pisc) #p<0.0001
pis_res_domes <- simulateResiduals(pisc)
plot(pis_res_domes) # I think is good??
pisc <- glmmTMB (attack ~ Area + (1|Site)+ (1|rep_ID) + offset (total_video_min),
data=piscivores,
family = poisson())
Anova(pisc) #p<0.0001
pis_res_domes <- simulateResiduals(pisc)
plot(pis_res_domes) # I think is good??
pisc <- glmmTMB (attack ~ Area + (1|Site)+ (1|rep_ID) + offset (total_video_min),
data=piscivores,
family = nbinom1())
Anova(pisc) #p<0.0001
pis_res_domes <- simulateResiduals(pisc)
plot(pis_res_domes) # I think is good??
pisc <- glmmTMB (attack ~ Area + (1|Site)+ (1|rep_ID) + offset (total_video_min),
data=piscivores,
family = nbinom2())
Anova(pisc) #p<0.0001
pis_res_domes <- simulateResiduals(pisc)
plot(pis_res_domes) # I think is good??
pisc <- glmmTMB (attack ~ Area + (1|Site)+ (1|rep_ID) + offset (total_video_min),
data=piscivores,
family = nbinom2(link = "log"))
Anova(pisc) #p<0.0001
pis_res_domes <- simulateResiduals(pisc)
plot(pis_res_domes) # I think is good??
pisc <- glmmTMB (attack ~ Area + (1|Site)+ (1|rep_ID) + offset (total_video_min),
data=piscivores,
family = poisson(link = "log"))
Anova(pisc) #p<0.0001
pis_res_domes <- simulateResiduals(pisc)
plot(pis_res_domes) # I think is good??
pisc <- glmmTMB (log(attack + 1) ~ Area + (1|Site)+ (1|rep_ID) + offset (total_video_min),
data=piscivores,
family = poisson())
Anova(pisc) #p<0.0001
pis_res_domes <- simulateResiduals(pisc)
plot(pis_res_domes) # I think is good??
pisc <- glmmTMB (log(attack + 1) ~ Area + (1|Site)+ (1|rep_ID) + offset (total_video_min),
data=piscivores,
family = nbinom1())
Anova(pisc) #p<0.0001
pis_res_domes <- simulateResiduals(pisc)
plot(pis_res_domes) # I think is good??
pisc <- glmmTMB (log(attack + 1) ~ Area + (1|Site)+ (1|rep_ID) + offset (total_video_min),
data=piscivores,
family = nbinom2())
Anova(pisc) #p<0.0001
pis_res_domes <- simulateResiduals(pisc)
plot(pis_res_domes) # I think is good??
pisc <- glmmTMB (log(attack + 1) ~ Area + (1|Site)+ (1|rep_ID) + offset (total_video_min),
data=piscivores,
family = Gamma())
pisc <- glmmTMB (attack + 1 ~ Area + (1|Site)+ (1|rep_ID) + offset (total_video_min),
data=piscivores,
family = poisson())
Anova(pisc) #p<0.0001
pis_res_domes <- simulateResiduals(pisc)
plot(pis_res_domes) # I think is good??
pisc <- glmmTMB (attack + 1 ~ Area + (1|Site)+ (1|rep_ID) + offset (total_video_min),
data=piscivores,
family = nbinom1())
Anova(pisc) #p<0.0001
pis_res_domes <- simulateResiduals(pisc)
plot(pis_res_domes) # I think is good??
pisc <- glmmTMB (attack + 1 ~ Area + (1|Site)+ (1|rep_ID) + offset (total_video_min),
data=piscivores,
family = nbinom2())
Anova(pisc) #p<0.0001
pis_res_domes <- simulateResiduals(pisc)
plot(pis_res_domes) # I think is good??
rm(list=ls()) # cleaning memory
# libraries
library(tidyverse)
library(dplyr)
library(ggplot2)
library(sp)
library(rgdal)
library(raster)
library(ggpubr)
library(ggspatial)
library(ozmaps)
library(cowplot)
library(car)
library(glmmTMB)
library(DHARMa)
library(here)
data <- read.csv(here:: here("data/data_predation.csv"))
data_domes <- data %>%
filter (Method != "Squidpop",
Treatment != "No_fish") %>%
dplyr::select(-Treatment)
data_domes <- unite(data_domes, rep_ID, c("Site", "Replicate", "Time"), sep = "_", remove = FALSE)
attack_number <- data_domes %>%
dplyr::group_by(Area,Site, rep_ID,Time, Trophic.group)%>% # sum everything in the transect by species
dplyr::summarise(attack=sum(attack_number,na.rm=T))%>%
ungroup%>%
tidyr::complete(Trophic.group, nesting(Area, Site, rep_ID,Time),fill= list(attack=0)) %>%
replace(is.na(.), 0)%>% # replace the NaN resulting from dividing 0 by 0 for 0
glimpse()
attack_number <- data_domes %>%
dplyr::group_by(Area,Site, rep_ID,Time)%>% # sum everything in the transect by species
dplyr::summarise(attack=sum(attack_number,na.rm=T))
inspecting_number <- data_domes %>%
dplyr::group_by(Area,Site,rep_ID,Time,Trophic.group)%>%
dplyr::summarise(inspecting=sum(inspecting_number,na.rm=T))%>%
ungroup%>%
tidyr::complete(Trophic.group, nesting(Area, Site,rep_ID,Time),fill= list(inspecting=0)) %>%
replace(is.na(.), 0)%>% # replace the NaN resulting from dividing 0 by 0 for 0
glimpse()
inspecting_number <- data_domes %>%
dplyr::group_by(Area,Site,rep_ID,Time,Species)%>%
dplyr::summarise(inspecting=sum(inspecting_number,na.rm=T))%>%
ungroup%>%
tidyr::complete(Species, nesting(Area, Site,rep_ID,Time),fill= list(inspecting=0)) %>%
replace(is.na(.), 0)%>% # replace the NaN resulting from dividing 0 by 0 for 0
glimpse()
inspect_domes <- glmmTMB (log(inspecting + 1)  ~ Area + (1|Site) + (1|rep_ID), data=inspecting_number,
family = nbinom1())
Anova(inspect_domes) #Area p=0.09
inspec_res_domes <- simulateResiduals(inspect_domes)
plot(inspec_res_domes) # Good!
inspecting_number_total <- data_domes %>%
dplyr::group_by(Area,Site,rep_ID,Time)%>%
dplyr::summarise(inspecting=sum(inspecting_number,na.rm=T))
inspect_domes <- glmmTMB (inspecting ~ Area + (1|Site) + (1|rep_ID), data=inspecting_number_total,
family = poisson())
Anova(inspect_domes) #Area p=0.12
inspect_domes <- glmmTMB (log(inspecting + 1)  ~ Area + (1|Site) + (1|rep_ID), data=inspecting_number,
family = nbinom1())
rm(list=ls()) # cleaning memory
# libraries
library(tidyverse)
library(dplyr)
library(ggplot2)
library(sp)
library(rgdal)
library(raster)
library(ggpubr)
library(ggspatial)
library(ozmaps)
library(cowplot)
library(car)
library(glmmTMB)
library(DHARMa)
library(here)
data <- read.csv(here:: here("data/data_predation.csv"))
data_domes <- data %>%
filter (Method != "Squidpop",
Treatment != "No_fish") %>%
dplyr::select(-Treatment)
data_domes <- unite(data_domes, rep_ID, c("Site", "Replicate", "Time"), sep = "_", remove = FALSE)
View(data_domes)
inspecting_number <- data_domes %>%
dplyr::group_by(Area,Site,rep_ID,Time, total_video_min)%>%
dplyr::summarise(inspecting=sum(inspecting_number,na.rm=T))
mod2 <- glmmTMB (inspecting ~ Area + (1|Site) + (1|rep_ID) + offset (total_video_min),
data=inspecting_number, family = poisson())
summary(mod2)
Anova(mod2)
attack_res_domes_mod2 <- simulateResiduals(mod2)
plot(attack_res_domes_mod2) # Residuals look terrible...
attack_number <- data_domes %>%
dplyr::group_by(Area,Site, rep_ID,Time, total_video_min)%>%
dplyr::summarise(attack=sum(attack_number,na.rm=T))
mod2 <- glmmTMB (inspecting ~ Area + (1|Site) + (1|rep_ID) + offset (total_video_min),
data=inspecting_number, family = nbinom1())
summary(mod2)
Anova(mod2)
attack_res_domes_mod2 <- simulateResiduals(mod2)
plot(attack_res_domes_mod2) # Residuals look terrible...
mod2 <- glmmTMB (inspecting ~ Area + (1|Site) + (1|rep_ID) + offset (total_video_min),
data=inspecting_number, family = nbinom2())
summary(mod2)
Anova(mod2)
attack_res_domes_mod2 <- simulateResiduals(mod2)
plot(attack_res_domes_mod2) # Residuals look terrible...
View(inspecting_number)
View(attack_number)
attack_number <- data_domes %>%
select(Area, Site, rep_ID, Time, total_video_min, attack_number, Species) %>%
filter(attack_number > 0)
attack_number <- data_domes %>%
dplyr::select(Area, Site, rep_ID, Time, total_video_min, attack_number, Species) %>%
dplyr::filter(attack_number > 0)
View(attack_number)
View(inspecting_number)
attack_number <- data_domes %>%
dplyr::select(Area, Site, rep_ID, Time, total_video_min, attack_number, Species)
View(attack_number)
attack_number <- data_domes %>%
dplyr::select(Area, Site, rep_ID, Time, total_video_min, Species) %>%
dplyr::summarise(attack=sum(attack_number,na.rm=T))%>%
ungroup%>%
tidyr::complete(Species, nesting(Area, Site,rep_ID,Time, total_video_min),fill= list(attack=0)) %>%
replace(is.na(.), 0)%>% # replace the NaN resulting from dividing 0 by 0 for 0
glimpse()
View(data_domes)
attack_number <- data_domes %>%
dplyr::select(Area, Site, rep_ID, Time, total_video_min, Species) %>%
dplyr::summarise(attack=sum(attack_number,na.rm=T))
data <- read.csv(here:: here("data/data_predation.csv"))
data_domes <- data %>%
filter (Method != "Squidpop",
Treatment != "No_fish") %>%
dplyr::select(-Treatment)
data_domes <- unite(data_domes, rep_ID, c("Site", "Replicate", "Time"), sep = "_", remove = FALSE)
attack_number <- data_domes %>%
dplyr::select(Area, Site, rep_ID, Time, total_video_min, Species) %>%
dplyr::summarise(attack=sum(attack_number,na.rm=T))%>%
ungroup%>%
tidyr::complete(Species, nesting(Area, Site,rep_ID,Time, total_video_min),fill= list(attack=0)) %>%
replace(is.na(.), 0)%>% # replace the NaN resulting from dividing 0 by 0 for 0
glimpse()
attack_number <- data_domes %>%
dplyr::group_by(Area,Site, rep_ID,Time, total_video_min)%>%
dplyr::summarise(attack=sum(attack_number,na.rm=T))
attack_number <- data_domes %>%
dplyr::group_by(Area, Site, rep_ID, Time, total_video_min, Species) %>%
dplyr::summarise(attack=sum(attack_number,na.rm=T))%>%
ungroup%>%
tidyr::complete(Species, nesting(Area, Site,rep_ID,Time, total_video_min),fill= list(attack=0)) %>%
replace(is.na(.), 0)%>% # replace the NaN resulting from dividing 0 by 0 for 0
glimpse()
View(attack_number)
attack_number <- data_domes %>%
dplyr::select(Area, Site, rep_ID, Time, total_video_min, attack_number, Species)
View(attack_number)
attack_number <- data_domes %>%
dplyr::select(Area, Site, rep_ID, Time, total_video_min, attack_number, Species) %>%
dplyr::filter(attack_number >0) %>%
tidyr:: complete(fill=list(attack=0))
View(attack_number)
View(data_domes)
